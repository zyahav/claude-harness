{
  "meta": {
    "project": "claude-harness",
    "phase": "Issue Fixes #1 and #2",
    "source": "GitHub Issues #1, #2",
    "lock": true
  },
  "tasks": [
    {
      "id": "HARNESS-001",
      "category": "cli",
      "title": "Add --handoff-path to start command with copy logic",
      "description": "Modify lifecycle.py create_run() to accept handoff_path parameter. When provided, copy the handoff.json to runs/<n>/handoff.json. Update .run.json metadata to track handoff path (relative).",
      "acceptance_criteria": [
        "start command accepts --handoff-path flag",
        "handoff.json is copied to run directory when flag provided",
        ".run.json includes 'handoff' field with relative path"
      ],
      "passes": true,
      "files_expected": ["lifecycle.py", "harness.py"],
      "steps": [
        "Add handoff_path parameter to create_run()",
        "Add shutil.copy logic when handoff_path provided",
        "Update .run.json to include handoff field"
      ]
    },
    {
      "id": "HARNESS-002",
      "category": "cli",
      "title": "Verify finish command handoff resolution order",
      "description": "Ensure handle_finish() resolves handoff.json in correct order: 1) --handoff-path flag, 2) runs/<n>/handoff.json, 3) fail with clear error.",
      "acceptance_criteria": [
        "CLI --handoff-path takes priority",
        "Falls back to runs/<n>/handoff.json",
        "Clear error message if neither exists"
      ],
      "passes": true,
      "files_expected": ["harness.py"],
      "steps": [
        "Review handle_finish() logic",
        "Verify resolution order",
        "Improve error message if needed"
      ]
    },
    {
      "id": "HARNESS-003",
      "category": "docs",
      "title": "Create CLAUDE_AI_WORKFLOW.md",
      "description": "New documentation file for Claude.ai users who want to use c-harness for branch/worktree management while working interactively (not using c-harness run).",
      "acceptance_criteria": [
        "File exists at docs/CLAUDE_AI_WORKFLOW.md",
        "Explains the manual agent workflow",
        "Shows how to share context with Claude.ai",
        "Covers handoff.json editing"
      ],
      "passes": true,
      "files_expected": ["docs/CLAUDE_AI_WORKFLOW.md"],
      "steps": [
        "Create docs/CLAUDE_AI_WORKFLOW.md",
        "Document workflow steps",
        "Include example commands"
      ]
    },
    {
      "id": "HARNESS-004",
      "category": "docs",
      "title": "Update README.md with Claude.ai workflow section",
      "description": "Add 'Using with Claude.ai (Manual Agent Mode)' section to README.md that links to the new workflow doc and clarifies c-harness run is optional.",
      "acceptance_criteria": [
        "README has new section for Claude.ai users",
        "Links to docs/CLAUDE_AI_WORKFLOW.md",
        "Clarifies c-harness run is optional"
      ],
      "passes": true,
      "files_expected": ["README.md"],
      "steps": [
        "Add new section after Brownfield Mode section",
        "Link to new workflow doc",
        "Show manual workflow pattern"
      ]
    },
    {
      "id": "HARNESS-005",
      "category": "docs",
      "title": "Update AGENT_GUIDE.md with interactive workflow",
      "description": "Add section for 'Interactive (Claude.ai) Workflow' covering how to skip c-harness run and work manually.",
      "acceptance_criteria": [
        "AGENT_GUIDE has new section for interactive workflow",
        "Explains skipping c-harness run",
        "Covers manual task completion"
      ],
      "passes": true,
      "files_expected": ["AGENT_GUIDE.md"],
      "steps": [
        "Add new section after Standard Operating Procedures",
        "Document interactive workflow",
        "Include handoff.json editing guidance"
      ]
    },
    {
      "id": "HARNESS-006",
      "category": "testing",
      "title": "Test complete workflow end-to-end",
      "description": "Verify the entire workflow works: start with --handoff-path, make changes, finish successfully.",
      "acceptance_criteria": [
        "c-harness start --handoff-path copies file correctly",
        "c-harness finish finds and validates handoff",
        "Branch pushes successfully"
      ],
      "passes": true,
      "files_expected": [],
      "steps": [
        "Run start with --handoff-path",
        "Verify handoff.json in run directory",
        "Run finish and verify success"
      ]
    }
  ]
}
